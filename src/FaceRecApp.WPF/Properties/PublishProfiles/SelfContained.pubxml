<?xml version="1.0" encoding="utf-8"?>
<!-- 
  Publish Profile: Self-Contained Windows x64
  
  Creates a single-folder deployment that includes:
    - Your app (.exe + DLLs)
    - .NET 9 runtime (no need to install .NET on target machine)
    - ONNX Runtime native libraries
    - OpenCvSharp native libraries
    - FaceAiSharp ONNX models (~30 MB)
  
  Output: bin/publish/ folder (~200-300 MB total)
  
  Usage (Visual Studio):
    Right-click FaceRecApp.WPF → Publish → Select this profile
  
  Usage (CLI):
    cd src/FaceRecApp.WPF
    dotnet publish -p:PublishProfile=Properties/PublishProfiles/SelfContained.pubxml
  
  IMPORTANT:
    SQL Server 2025 Express must still be installed separately on the target machine.
    The app connects to localhost\SQLEXPRESS by default (configurable in appsettings.json).
-->
<Project>
  <PropertyGroup>
    <Configuration>Release</Configuration>
    <Platform>Any CPU</Platform>
    <PublishDir>bin\publish</PublishDir>
    <PublishProtocol>FileSystem</PublishProtocol>
    
    <!-- Self-contained: includes .NET runtime -->
    <SelfContained>true</SelfContained>
    <RuntimeIdentifier>win-x64</RuntimeIdentifier>
    
    <!-- Single file: pack everything into fewer files -->
    <!-- Note: Native DLLs (OpenCV, ONNX) still appear as separate files -->
    <PublishSingleFile>false</PublishSingleFile>
    
    <!-- Trim unused code to reduce size -->
    <!-- WARNING: Trimming can break reflection-heavy code. Test thoroughly! -->
    <PublishTrimmed>false</PublishTrimmed>
    
    <!-- ReadyToRun: pre-compile to native code for faster startup -->
    <PublishReadyToRun>true</PublishReadyToRun>
  </PropertyGroup>
</Project>
