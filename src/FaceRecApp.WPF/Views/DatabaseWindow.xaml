<Window x:Class="FaceRecApp.WPF.Views.DatabaseWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Database"
        Height="560" Width="780"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BgPrimary}">

    <Window.Resources>
        <Style x:Key="DgColumnHeader" TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="{StaticResource BgSurfaceDim}"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderLight}"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
        </Style>
    </Window.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="16"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="16"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="16"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0" Text="Registered Persons"
                   Style="{StaticResource PageTitle}"/>

        <!-- Stats -->
        <Border Grid.Row="2" Style="{StaticResource Card}" Padding="14,10">
            <WrapPanel>
                <TextBlock x:Name="StatPersons" Style="{StaticResource CaptionText}"
                           Margin="0,0,24,0"/>
                <TextBlock x:Name="StatSamples" Style="{StaticResource CaptionText}"
                           Margin="0,0,24,0"/>
                <TextBlock x:Name="StatRecognitions" Style="{StaticResource CaptionText}"
                           Margin="0,0,24,0"/>
                <TextBlock x:Name="StatRate" Style="{StaticResource CaptionText}"/>
            </WrapPanel>
        </Border>

        <!-- DataGrid -->
        <DataGrid x:Name="PersonsGrid" Grid.Row="4"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  Background="{StaticResource BgSurface}"
                  Foreground="{StaticResource TextPrimary}"
                  BorderBrush="{StaticResource BorderDefault}"
                  BorderThickness="1"
                  RowBackground="{StaticResource BgSurface}"
                  AlternatingRowBackground="{StaticResource BgSurfaceDim}"
                  GridLinesVisibility="Horizontal"
                  HorizontalGridLinesBrush="{StaticResource BorderLight}"
                  HeadersVisibility="Column"
                  ColumnHeaderStyle="{StaticResource DgColumnHeader}"
                  FontSize="12"
                  CanUserResizeRows="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="*"/>
                <DataGridTextColumn Header="External ID" Binding="{Binding ExternalId}" Width="100"/>
                <DataGridTextColumn Header="Samples" Binding="{Binding FaceSampleCount}" Width="70"/>
                <DataGridTextColumn Header="Recognitions" Binding="{Binding TotalRecognitions}" Width="90"/>
                <DataGridTextColumn Header="Last Seen" Binding="{Binding LastSeenAt, StringFormat='{}{0:MM/dd HH:mm}'}" Width="110"/>
                <DataGridTextColumn Header="Notes" Binding="{Binding Notes}" Width="120"/>
            </DataGrid.Columns>
            <DataGrid.CellStyle>
                <Style TargetType="DataGridCell">
                    <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Padding" Value="6,4"/>
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="{StaticResource BgSurfaceDim}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.CellStyle>
            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Setter Property="Height" Value="34"/>
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="{StaticResource BgSurfaceDim}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>
        </DataGrid>

        <!-- Buttons -->
        <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Refresh"
                    Click="OnRefreshClick"
                    Style="{StaticResource BtnPrimary}"
                    Margin="0,0,8,0"/>
            <Button Content="Delete Selected"
                    Click="OnDeleteClick"
                    Style="{StaticResource BtnDanger}"
                    Margin="0,0,8,0"/>
            <Button Content="Close"
                    Click="OnCloseClick"
                    Style="{StaticResource BtnBase}"/>
        </StackPanel>
    </Grid>
</Window>
